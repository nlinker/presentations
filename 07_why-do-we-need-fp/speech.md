Зачем нам нужно ФП?

Интро: я Линкер Николай, я занимаюсь разработкой программного обеспечения N лет.
Проще говоря, программист. Работаю, в-основном, с бэкендом, но в течение профессиональной
карьеры довелось поработать со множеством задач, от оконных библиотек до компиляторов и
попробовать множество инструментов от Си до Хаскеля.

----------------------

Функциональные языки, которые легко зашли в народ: Excel & SQL

Итак, функциональное программирование вам нужно, чтобы улучшить следующие показатели:
- Тестирование
- Отладка
- Параллелизм и конкуррентность
- Асинхронные вычисления
- Ленивые вычисления
- Горячая замена кода
- Компилятору легче
- Программисту часто тоже легче

1. Неизменяемые объекты (чужие, инфицированные пользователи)
Чужие вместо юзеров, игра.

2. Чистые функции

3. Запах монад в этих ваших языках, thunks

4. Ссылки
Haskell - сделать какую-то простую консольную игру, Сокобан, Тетрис, Жизнь.

(2 + 4) * (5 - 3) почему с ними управляться так красиво и легко? Потому что функции и композиция.

Изменяемые объекты влекут одну большую проблему: некорректное состояние объекта и нулевые ссылки
Изменяемые объекты разрушают инварианты.

Но неизменяемые структуры данных это же дооорого! HAMT vs ArrayList

Прочь циклы, даёшь higher order functions.

Дженерики - это фича из функционального программирования.
В сущности это способ сделать супер-расширяемый код. Вот это самое
T в `List<T>` может быть сколь угодно любым, нет никаких зависимостей от
содержимого T, реализует ли он какие-нибудь интерфейсы и так далее.
Разве это не прекрасно?


Если мы передадим не значение, а функцию, так называемый thunk,
это повлечёт очень интересные последствия.
Давайте посмотрим подробнее, какими свойствами обладает эта конструкция.

Как выглядит код, для чтения которого нужно очень много кратковременной памяти?
Он выглядит очень запутанным, там одновременно происходит множество вещей и большое
количество эффектов. Их бы надо делать как-то отдельно, но автор почему-то
решил свалить всё в эту большую кучу, из-за чего его хочется чем-то огреть.

Чистая функция - это функция, которая при одинаковых аргументах всегда
возвращает одни и те же значения и не имеет видимых побочных эффектов.
- детерминированная
- не должно быть

Побочный эффект - это всё что угодно кроме возвращаемого значения.

Почему побочные эффекты плохие?
- они почти всегда требуют упорядочивания
- их легко забыть
- связь между разными частями программы становится неявной
- сильно мешают повторному использованию
- сильно мешают компилятору или рантайму
- понижают безопасность системы (*)

В императивных языках некоторые функции в процессе выполнения
своих вычислений могут модифицировать значения глобальных переменных,
осуществлять операции ввода-вывода, реагировань на исключительные ситуации,
вызывая их обработчики. Такие функции называются нечистыми, или
функциями с побочными эффектами.
this - может тоже быть источником побочных эффектов

Функция высшего порядка - функция, принимающая в качестве аргументов
другие фукнции или возвращающая другую функцию в качесве результата.
Основная идея состоит в том, что функции имеют тот же статус, что и
другие объекты данных.

Паттерн "билдер", сначала строим объект, но после завершения не меняем.
